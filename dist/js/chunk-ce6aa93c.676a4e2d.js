(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce6aa93c"],{"159b":function(t,e,r){var a=r("da84"),s=r("fdbc"),n=r("17c2"),i=r("9112");for(var o in s){var c=a[o],d=c&&c.prototype;if(d&&d.forEach!==n)try{i(d,"forEach",n)}catch(u){d.forEach=n}}},"17c2":function(t,e,r){"use strict";var a=r("b727").forEach,s=r("a640"),n=r("ae40"),i=s("forEach"),o=n("forEach");t.exports=i&&o?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,r){"use strict";var a=r("23e7"),s=r("17c2");a({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},"4c8c":function(t,e,r){},"4d63":function(t,e,r){var a=r("83ab"),s=r("da84"),n=r("94ca"),i=r("7156"),o=r("9bf2").f,c=r("241c").f,d=r("44e7"),u=r("ad6d"),l=r("9f7f"),f=r("6eeb"),h=r("d039"),v=r("69f3").set,p=r("2626"),g=r("b622"),b=g("match"),m=s.RegExp,y=m.prototype,O=/a/g,A=/a/g,w=new m(O)!==O,D=l.UNSUPPORTED_Y,k=a&&n("RegExp",!w||D||h((function(){return A[b]=!1,m(O)!=O||m(A)==A||"/a/i"!=m(O,"i")})));if(k){var x=function(t,e){var r,a=this instanceof x,s=d(t),n=void 0===e;if(!a&&s&&t.constructor===x&&n)return t;w?s&&!n&&(t=t.source):t instanceof x&&(n&&(e=u.call(t)),t=t.source),D&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var o=i(w?new m(t,e):m(t,e),a?this:y,x);return D&&r&&v(o,{sticky:r}),o},E=function(t){t in x||o(x,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},S=c(m),$=0;while(S.length>$)E(S[$++]);y.constructor=x,x.prototype=y,f(s,"RegExp",x)}p("RegExp")},"4de4":function(t,e,r){"use strict";var a=r("23e7"),s=r("b727").filter,n=r("1dde"),i=r("ae40"),o=n("filter"),c=i("filter");a({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},5319:function(t,e,r){"use strict";var a=r("d784"),s=r("825a"),n=r("7b0b"),i=r("50c4"),o=r("a691"),c=r("1d80"),d=r("8aa5"),u=r("14c3"),l=Math.max,f=Math.min,h=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,r,a){var b=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=a.REPLACE_KEEPS_$0,y=b?"$":"$0";return[function(r,a){var s=c(this),n=void 0==r?void 0:r[t];return void 0!==n?n.call(r,s,a):e.call(String(s),r,a)},function(t,a){if(!b&&m||"string"===typeof a&&-1===a.indexOf(y)){var n=r(e,t,this,a);if(n.done)return n.value}var c=s(t),h=String(this),v="function"===typeof a;v||(a=String(a));var p=c.global;if(p){var A=c.unicode;c.lastIndex=0}var w=[];while(1){var D=u(c,h);if(null===D)break;if(w.push(D),!p)break;var k=String(D[0]);""===k&&(c.lastIndex=d(h,i(c.lastIndex),A))}for(var x="",E=0,S=0;S<w.length;S++){D=w[S];for(var $=String(D[0]),_=l(f(o(D.index),h.length),0),C=[],j=1;j<D.length;j++)C.push(g(D[j]));var P=D.groups;if(v){var M=[$].concat(C,_,h);void 0!==P&&M.push(P);var I=String(a.apply(void 0,M))}else I=O($,h,_,C,P,a);_>=E&&(x+=h.slice(E,_)+I,E=_+$.length)}return x+h.slice(E)}];function O(t,r,a,s,i,o){var c=a+t.length,d=s.length,u=p;return void 0!==i&&(i=n(i),u=v),e.call(o,u,(function(e,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,a);case"'":return r.slice(c);case"<":o=i[n.slice(1,-1)];break;default:var u=+n;if(0===u)return e;if(u>d){var l=h(u/10);return 0===l?e:l<=d?void 0===s[l-1]?n.charAt(1):s[l-1]+n.charAt(1):e}o=s[u-1]}return void 0===o?"":o}))}}))},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},7156:function(t,e,r){var a=r("861d"),s=r("d2bb");t.exports=function(t,e,r){var n,i;return s&&"function"==typeof(n=e.constructor)&&n!==r&&a(i=n.prototype)&&i!==r.prototype&&s(t,i),t}},"99af":function(t,e,r){"use strict";var a=r("23e7"),s=r("d039"),n=r("e8b5"),i=r("861d"),o=r("7b0b"),c=r("50c4"),d=r("8418"),u=r("65f0"),l=r("1dde"),f=r("b622"),h=r("2d00"),v=f("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",b=h>=51||!s((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),m=l("concat"),y=function(t){if(!i(t))return!1;var e=t[v];return void 0!==e?!!e:n(t)},O=!b||!m;a({target:"Array",proto:!0,forced:O},{concat:function(t){var e,r,a,s,n,i=o(this),l=u(i,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(n=-1===e?i:arguments[e],y(n)){if(s=c(n.length),f+s>p)throw TypeError(g);for(r=0;r<s;r++,f++)r in n&&d(l,f,n[r])}else{if(f>=p)throw TypeError(g);d(l,f++,n)}return l.length=f,l}})},a15b:function(t,e,r){"use strict";var a=r("23e7"),s=r("44ad"),n=r("fc6a"),i=r("a640"),o=[].join,c=s!=Object,d=i("join",",");a({target:"Array",proto:!0,forced:c||!d},{join:function(t){return o.call(n(this),void 0===t?",":t)}})},b64b:function(t,e,r){var a=r("23e7"),s=r("7b0b"),n=r("df75"),i=r("d039"),o=i((function(){n(1)}));a({target:"Object",stat:!0,forced:o},{keys:function(t){return n(s(t))}})},bce1:function(t,e,r){"use strict";var a=r("4c8c"),s=r.n(a);s.a},bde7:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"submitorder"},[r("van-nav-bar",{attrs:{title:"提交订单","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),r("div",{staticClass:"content-box"},[r("div",{staticClass:"address"},[r("van-cell",{staticClass:"van-cell-aa",attrs:{"is-link":"",center:""},on:{click:t.choose},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",{staticClass:"clearfix"},[r("span",{staticClass:"name fl"},[t._v(t._s(t.defaultAddress.name))]),r("span",{staticClass:"tel fl"},[t._v(t._s(t.defaultAddress.tel))]),r("span",{staticClass:"tag fl"},[r("van-tag",{directives:[{name:"show",rawName:"v-show",value:t.defaultAddress.isDefault,expression:"defaultAddress.isDefault"}],attrs:{type:"primary"}},[t._v("默认")])],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.isHasAddress,expression:"!isHasAddress"}]},[t._v("您还没有收获地址,请先添加收货地址")])]},proxy:!0},{key:"label",fn:function(){return[r("span",{staticClass:"potations"},[t._v(t._s(t.defaultAddress.address))])]},proxy:!0}])}),r("van-action-sheet",{attrs:{title:"选择收货地址",round:!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("div",{staticClass:"address-box"},[r("van-address-list",{attrs:{list:t.AddressData,"default-tag-text":"默认"},on:{add:t.onAdd,edit:t.onEdit,select:t.addressSele},model:{value:t.chosenAddressId,callback:function(e){t.chosenAddressId=e},expression:"chosenAddressId"}})],1)])],1),r("div",{staticClass:"goods-cont"},[r("div",{staticClass:"goods"},t._l(t.orederData,(function(e,a){return r("div",{key:a,staticClass:"item clearfix"},[r("div",{staticClass:"goods-img fl"},[r("img",{staticClass:"auto-img",attrs:{src:e.small_img,alt:""}})]),r("div",{staticClass:"goods-details fl"},[r("div",{staticClass:"gs-mon clearfix"},[r("span",{staticClass:"gs-name fl"},[t._v(t._s(e.name))]),r("span",{staticClass:"gs-pri fr"},[t._v(t._s(e.price))])]),r("div",{staticClass:"gs-spe clearfix"},[r("div",{staticClass:"spec fl"},[t._v(t._s(e.rule))]),r("div",{staticClass:"gs-count fr"},[t._v("x"+t._s(e.count))])])])])})),0),r("div",{staticClass:"pri-total"},[r("div",[r("span",{staticClass:"text"},[t._v("共"+t._s(t.orederDesc.count)+"件商品")]),r("span",{staticClass:"text"},[t._v("合计")]),r("span",{staticClass:"total"},[t._v(t._s(t.orederDesc.total))])])])])]),r("van-submit-bar",{attrs:{price:100*t.orederDesc.total,"button-type":"info","button-text":"提交订单"},on:{submit:t.commitOrder}})],1)},s=[],n=(r("99af"),r("4160"),r("b0c0"),r("ac1f"),r("1276"),r("159b"),r("5530")),i=r("2f62"),o=r("fa7d"),c={name:"SubmitOrder",data:function(){return{show:!1,chosenAddressId:"0"}},created:function(){this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.$store.commit("SubmitOrderModules/emptyData");var t=this.$route.query.sids.split("-");this.$store.commit("SubmitOrderModules/changeData",{key:"sids",value:t}),this.addressData(),this.findBuyProduct(t)},computed:Object(n["a"])({},Object(i["b"])("SubmitOrderModules",["AddressData","defaultAddress","orederData","orederDesc","isHasAddress","sids"])),methods:{back:function(){this.$router.go(-1),this.$store.commit("changeData",{key:"pag",value:2})},choose:function(){this.isHasAddress?this.show=!0:(this.show=!1,this.onAdd())},onAdd:function(){this.$router.push({name:"NewAddress",query:{isAdd:1}})},onEdit:function(t){this.$router.push({name:"NewAddress",query:{isAdd:0,aid:t.aid}})},addressData:function(){var t=this,e=localStorage.getItem("_t");this.axios({method:"GET",url:"/findAddress",params:{appkey:this.appKey,tokenString:e}}).then((function(e){if(t.$toast.clear(),2e4==e.data.code){if(0==e.data.result.length)return void t.$store.commit("SubmitOrderModules/changeData",{key:"isHasAddress",value:!1});t.$store.commit("SubmitOrderModules/changeData",{key:"isHasAddress",value:!0});var r=[];e.data.result.forEach((function(e,a){var s={id:a+"",aid:e.aid,name:e.name,tel:e.tel,address:e.province+e.city+e.county+e.addressDetail,isDefault:Boolean(e.isDefault)};t.$store.commit("SubmitOrderModules/changeData",{key:"AddressData",value:r}),s.isDefault?(r.unshift(s),t.chosenAddressId=s.id,t.$store.commit("SubmitOrderModules/changeData",{key:"defaultAddress",value:s})):(r.push(s),t.$store.commit("SubmitOrderModules/changeData",{key:"defaultAddress",value:t.AddressData[0]}),t.chosenAddressId="0")}))}})).catch((function(e){t.$toast.clear()}))},findBuyProduct:function(t){var e=this,r=localStorage.getItem("_t");this.axios({type:"GET",url:"/commitShopcart",params:{appkey:this.appKey,tokenString:r,sids:JSON.stringify(t)}}).then((function(t){5e4==t.data.code&&(e.orederDesc.total=0,e.orederDesc.count=0,t.data.result.forEach((function(t){e.orederDesc.total+=parseInt(t.price)*t.count,e.orederDesc.count+=t.count})),e.$store.commit("SubmitOrderModules/changeData",{key:"orederData",value:t.data.result}))})).catch((function(t){}))},addressSele:function(t){this.$store.commit("SubmitOrderModules/changeData",{key:"defaultAddress",value:t}),this.show=!1},commitOrder:function(){var t=this;if(this.isHasAddress){this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."});var e=localStorage.getItem("_t"),r=this.sids.concat();this.axios({method:"POST",url:"/pay",data:{appkey:this.appKey,tokenString:e,sids:JSON.stringify(r),phone:this.defaultAddress.tel,receiver:this.defaultAddress.name,address:this.defaultAddress.address},transformRequest:o["a"].transformRequest}).then((function(e){t.$toast.clear(),t.$router.push({name:"MyOrder"}),t.$store.commit("changeData",{key:"pag",value:1})})).catch((function(e){t.$toast.clear()}))}else this.$toast("您还没有收货地址")}}},d=c,u=(r("bce1"),r("2877")),l=Object(u["a"])(d,a,s,!1,null,"055ed984",null);e["default"]=l.exports},bee2:function(t,e,r){"use strict";function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r.d(e,"a",(function(){return s}))},d4ec:function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",(function(){return a}))},dbb4:function(t,e,r){var a=r("23e7"),s=r("83ab"),n=r("56ef"),i=r("fc6a"),o=r("06cf"),c=r("8418");a({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){var e,r,a=i(t),s=o.f,d=n(a),u={},l=0;while(d.length>l)r=s(a,e=d[l++]),void 0!==r&&c(u,e,r);return u}})},e439:function(t,e,r){var a=r("23e7"),s=r("d039"),n=r("fc6a"),i=r("06cf").f,o=r("83ab"),c=s((function(){i(1)})),d=!o||c;a({target:"Object",stat:!0,forced:d,sham:!o},{getOwnPropertyDescriptor:function(t,e){return i(n(t),e)}})},fa7d:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("4160"),r("a15b"),r("fb6a"),r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("5319");var a=r("d4ec"),s=r("bee2"),n=function(){function t(){Object(a["a"])(this,t)}return Object(s["a"])(t,[{key:"transformRequest",value:function(t){var e="";for(var r in t)e+=r+"="+t[r]+"&";return e}},{key:"getToken",value:function(t){var e=["t0","t1","t2"],r=[];return e.forEach((function(e){r.push(t.$cookies.get(e))})),r.join(".")}},{key:"formatDate",value:function(t,e){var r=t.getFullYear().toString();if(/(y+)/.test(e)){var a=RegExp.$1;e=e.replace(a,r.slice(r.length-a.length))}var s={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var n in s){var i=new RegExp("(".concat(n,"{1,2})"));if(i.test(e)){var o=RegExp.$1,c=s[n]>=10||1==o.length?s[n]:"0"+s[n];e=e.replace(o,c)}}return e}}]),t}(),i=new n}}]);
//# sourceMappingURL=chunk-ce6aa93c.676a4e2d.js.map